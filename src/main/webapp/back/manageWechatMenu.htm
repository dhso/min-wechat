<#assign head_title = "微信菜单">
<!DOCTYPE html>
<html lang="en">
<head><#include "common/head.htm" encoding="UTF-8"></head>
<body class="easyui-layout">
	<div data-options="region:'north',border:false" style="overflow:hidden">
        <div class="panel-header" style="padding:0;border-width:1px 0;text-align:center">
            <a href="${baseUrl}/back/index" class="easyui-linkbutton" data-options="iconCls:'icon-back'" style="position:absolute;left:3px;top:3px">返回</a>
            <span class="panel-title" style="line-height:32px">${head_title}</span>
            <div style="clear:both"></div>
        </div>
    </div>
    <div data-options="region:'center',border:false" style="padding:20px">
    	<div style="padding:5px 0;">
    		<#if errorMsg??>
				<div class="alert ${errorMsg.errType}">${errorMsg.errMessage}</div>
			</#if>
			<div>
	    		<form action="${baseUrl}/back/manageWechatMenu" method="post">
	    			<div class="easyui-panel" title="JSON菜单" style="padding:10px;">
				        <input name="newMenuJson" class="easyui-textbox" data-options="multiline:true" value='<#if wechatMenuJson??>${wechatMenuJson}</#if>' style="width:100%;height:100px">
				    	<button type="submit" class="easyui-linkbutton" data-options="iconCls:'icon-save'" style="float: right;margin-top: 10px;">更新菜单</button>
				    </div>
	    		</form>
	    	</div>
			 <div class="easyui-accordion" data-options="fit:true">
			 	<#list wechatMenu.button as menus>
			 	<div title="${menus.name}-<#if menus.type??>${menus.type}</#if>-<#if menus.key??>${menus.key}</#if>-<#if menus.url??>${menus.url}</#if>" data-options="collapsed:false,collapsible:false" style="padding:10px">
		        	<#if menus.sub_button??>
		        	<table class="table hidden-more table-striped table-bordered table-hover table-condensed">
				        <thead>
				            <tr>
				                <th width="60px">名称</th>
				                <th width="40px">类型</th>
				                <th width="40px">KEY</th>
				                <th>URL</th>
				            </tr>
				        </thead>
				        <tbody>
				        	<#list menus.sub_button as subMenus>
				        	<tr>
				        		<td>${subMenus.name}</td><td>${subMenus.type}</td><td><#if subMenus.key??>${subMenus.key}</#if></td><td><#if subMenus.url??>${subMenus.url}</#if></td>
				        	</tr>
				        	</#list>
				        </tbody>
				    </table>
					</#if>
		        </div>
		        </#list>
			 </div>
    	</div>
    </div>

<#include "common/foot.htm" encoding="UTF-8">
<style scoped>
table.hidden-more{  
    table-layout:fixed;  
    }   
table.hidden-more td {  
    white-space:nowrap;  
    overflow:hidden;  
    }
</style>
</body>
</html>